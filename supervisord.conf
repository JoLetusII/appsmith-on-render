; /etc/supervisor/supervisord.conf
[supervisord]
nodaemon=true
logfile=/appsmith-stacks/logs/supervisord.log

[program:appsmith-server]
command=/opt/appsmith/scripts/start-server.sh
autostart=true
autorestart=true
stdout_logfile=/appsmith-stacks/logs/server.out.log
stderr_logfile=/appsmith-stacks/logs/server.err.log
environment=JAVA_TOOL_OPTIONS=-XX:+UseG1GC

[program:appsmith-worker]
command=/opt/appsmith/scripts/start-worker.sh
autostart=true
autorestart=true
stdout_logfile=/appsmith-stacks/logs/worker.out.log
stderr_logfile=/appsmith-stacks/logs/worker.err.log

[program:nginx]
command=/usr/sbin/nginx -g "daemon off;" -c /etc/nginx/nginx.conf
autostart=true
autorestart=true
stdout_logfile=/appsmith-stacks/logs/nginx.out.log
stderr_logfile=/appsmith-stacks/logs/nginx.err.log

; Optional: expose Supervisor web UI at :9001 (basic auth can be added)
[inet_http_server]
port=127.0.0.1:9001

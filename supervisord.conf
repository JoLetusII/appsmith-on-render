[supervisord]
nodaemon=true
user=root
logfile=/var/log/supervisor/supervisord.log
pidfile=/var/run/supervisord.pid
childlogdir=/var/log/supervisor

; ---- Supervisor Web UI over UNIX socket ----
[unix_http_server]
file=/tmp/supervisor.sock
chmod=0700
; Optional auth:
;username=admin
;password=change-me

[supervisorctl]
serverurl=unix:///tmp/supervisor.sock

; ---------- NGINX ----------
[program:nginx]
command=/usr/sbin/nginx -g "daemon off;"
autorestart=true
priority=10
stdout_logfile=/var/log/supervisor/nginx.stdout.log
stderr_logfile=/var/log/supervisor/nginx.stderr.log
startretries=999
startsecs=2

; ---------- APPSMITH SERVER (Java) ----------
[program:appsmith-server]
command=/usr/local/bin/start-appsmith-server.sh
directory=/opt/appsmith
environment=JAVA_TOOL_OPTIONS="-XX:MaxRAMPercentage=75"
autorestart=true
priority=20
stdout_logfile=/var/log/supervisor/server.stdout.log
stderr_logfile=/var/log/supervisor/server.stderr.log
startretries=999

; ---------- APPSMITH RTS (Node) ----------
[program:appsmith-rts]
command=/usr/local/bin/start-appsmith-rts.sh
directory=/opt/appsmith
autorestart=true
priority=30
stdout_logfile=/var/log/supervisor/rts.stdout.log
stderr_logfile=/var/log/supervisor/rts.stderr.log
startretries=999






